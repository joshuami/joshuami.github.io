
<!DOCTYPE html>
<html  lang="en" dir="ltr" prefix="og: https://ogp.me/ns#">
  <head>
          
        <meta charset="utf-8" />
<meta name="description" content="You may be familiar with the Entity Usage module. It&#039;s been around since early 2018 for modern Drupal sites to track content, media, taxonomy terms, blocks... really any entity type. Once enabled, you can configure these entity types to be a source or a target and define whether it has a &quot;Usage&quot; local task. " />
<link rel="canonical" href="https://joshuami.com/blog/2025/getting-rid-unused-media-entity-usage-module" />
<link rel="shortlink" href="https://joshuami.com/" />
<meta name="rights" content="Copyright ©2025 All rights reserved." />
<meta name="referrer" content="unsafe-url" />
<meta property="og:site_name" content="Joshuami" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://joshuami.com/blog/2025/getting-rid-unused-media-entity-usage-module" />
<meta property="og:title" content="Getting Rid of Unused Media with the Entity Usage Module" />
<meta property="og:description" content="You may be familiar with the Entity Usage module. It&#039;s been around since early 2018 for modern Drupal sites to track content, media, taxonomy terms, blocks... really any entity type. Once enabled, you can configure these entity types to be a source or a target and define whether it has a &quot;Usage&quot; local task. " />
<meta property="og:updated_time" content="2025-08-29T16:32:01-07:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="You may be familiar with the Entity Usage module. It&#039;s been around since early 2018 for modern Drupal sites to track content, media, taxonomy terms, blocks... really any entity type. Once enabled, you can configure these entity types to be a source or a target and define whether it has a &quot;Usage&quot; local task. " />
<meta name="twitter:title" content="Getting Rid of Unused Media with the Entity Usage Module" />
<meta name="Generator" content="Drupal 11 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
        {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://joshuami.com/"
        },
        {
            "@type": "ListItem",
            "position": 2,
            "name": "Joshuami",
            "item": "https://joshuami.com/blog"
        }
    ]
}</script>
<link rel="icon" href="/core/misc/favicon.ico" type="image/vnd.microsoft.icon" />

    <title>Getting Rid of Unused Media with the Entity Usage Module | Joshuami</title>
    <link rel="stylesheet" media="all" href="/sites/default/files/css/css_Y55-u6swsWbZ_ygCEXN4q_ZI8BanmxzDuTh9L410AgE.css?delta=0&amp;language=en&amp;theme=xtra&amp;include=eJwdxGEKgDAIBtALyTyTtS8QtMV0bbt90PvxHFWFL7VEL6c8qe2m2JFwPiRAr2IG_xdvdRhoZReO3IYP88sYIw" />
<link rel="stylesheet" media="all" href="/sites/default/files/css/css_fedh1io9XB2Vtrnb5LywuKocMJkZo6Kmfpzvwbh30kI.css?delta=1&amp;language=en&amp;theme=xtra&amp;include=eJwdxGEKgDAIBtALyTyTtS8QtMV0bbt90PvxHFWFL7VEL6c8qe2m2JFwPiRAr2IG_xdvdRhoZReO3IYP88sYIw" />

    
          
      </head>
  <body  class="node-146 node-type--blog path-node language--en" data-component-id="xtra:html" data-bs-theme="dark">
          
            <a href="#main-content" class="visually-hidden focusable">
      Skip to main content
    </a>

    
      <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas>
    <div  class="page">
      <nav  data-bs-theme="dark" class="navbar navbar-expand-sm justify-content-between border border-primary border-0 border-bottom border-4"><div  class="container"><div  data-component-id="xtra:block" class="block block-system block-system-branding-block block--xtra-branding block--system-branding"><a href="/" class="navbar-brand " aria-label="Joshuami"><div class="navbar-brand__text d-flex flex-column"><span class="display-4">Joshuami</span><span class="small text-muted">Maker of web platforms and products</span></div></a></div><button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse"><div class="ms-auto"><div  data-component-id="xtra:block" class="block block-system block-system-menu-blockmain block--xtra-main-menu block--system-menu ms-4"><div class="block__content"><ul  data-component-id="radix:nav" class="nav navbar-nav mt-1"><li class="nav-item"><a href="/blog" class="nav-link fw-bold h2 mb-0 link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover" data-drupal-link-system-path="blog">Blog</a></li></ul></div></div></div></div></div></nav>  
      

<main id="main-content">
              <header data-component-id="xtra:page-content" class="page__header container-fluid"">
      <div class="container">
        <div class="row align-items-center">
          <div class="col py-4">
                  <div  data-component-id="xtra:block" class="block block-system block-system-breadcrumb-block block--xtra-breadcrumbs"><div class="block__content"><nav aria-label="breadcrumb"><ol  data-component-id="radix:breadcrumb" class="breadcrumb my-3"><li class="breadcrumb-item "><a href="/">Home</a></li><li class="breadcrumb-item "><a href="/blog">Joshuami</a></li></ol></nav></div></div><div  data-component-id="xtra:block" class="block block-core block-page-title-block block--xtra-page-title"><div class="block__content"><h1  class="title page-title"><span>Getting Rid of Unused Media with the Entity Usage Module</span></h1></div></div>
  
          </div>
                            </div>
      </div>
    </header>
    <div class="container">
    <div class="row">
              <div class="page__content col">
                                <div data-drupal-messages-fallback class="hidden"></div>
<div  data-component-id="xtra:block" class="block block-system block-system-main-block block--xtra-content block--system-main"><div class="block__content"><article  data-component-id="xtra:node" class="node node--promoted blog blog--full node--blog--full view-mode--full"><div  class="node-content"><div  data-component-id="xtra:field" class="field field--name-field-featured-image field--type-entity-reference field--label-hidden field--item"><div class="media media--type-image media--view-mode-_6-9-large"><picture><source srcset="/sites/default/files/styles/16_9_512x288_focal_point_webp/public/2025-08/getting-rid-of-unused-media-with-the-entity-usage-module.png.webp?itok=o-3qPU6t 512w, /sites/default/files/styles/16_9_704x396_focal_point_webp/public/2025-08/getting-rid-of-unused-media-with-the-entity-usage-module.png.webp?itok=f0K5F8O3 704w, /sites/default/files/styles/16_9_960x540_focal_point_webp/public/2025-08/getting-rid-of-unused-media-with-the-entity-usage-module.png.webp?itok=Od1oHUWI 960w" media="all and (min-width: 500px)" type="image/webp" sizes="100vw" width="960" height="540"/><img  src="/sites/default/files/styles/16_9_512x288_focal_point_webp/public/2025-08/getting-rid-of-unused-media-with-the-entity-usage-module.png.webp?itok=o-3qPU6t" alt="" title="" width="512" height="288" loading="lazy" data-component-id="xtra:image" class="img-fluid" /></picture></div></div><div class="badge bg-secondary text-light me-2 my-1 link-light">

  Drupal
</div><div class="badge bg-secondary text-light me-2 my-1 link-light">

  Media
</div><div class="badge bg-secondary text-light me-2 my-1 link-light">

  Entity Usage
</div><div class="views-element-container"><div class="view view-eva view-content-dates view-id-content_dates view-display-id-eva_content_dates js-view-dom-id-86d2bf2f0190e94553c598fb1371a512bf64ffd6f9fa6f236e49d474d3607894"><div class="views-row"><div class="views-field views-field-created"><span class="field-content"><p class="my-3">Posted on 
<time datetime="2025-08-28T09:25:00-07:00" title="Thursday, 28 August 2025 - 9:25 am">28 Aug 2025 - 9:25 am</time></p></span></div></div></div></div><div  data-component-id="xtra:field" class="field field--name-body field--type-text-with-summary field--label-hidden field--item mb-3"><p>You may be familiar with the <a href="https://www.drupal.org/project/entity_usage">Entity Usage</a> module. It's been around since early 2018 for modern Drupal sites to track content, media, taxonomy terms, blocks... really any entity type.</p><p>Once enabled, you can configure these entity types to be a source or a target and define whether it has a "Usage" local task.&nbsp;</p><div class="align-center media media--type-image media--view-mode-small"><picture><source srcset="/sites/default/files/styles/uncropped_300w_webp/public/2025-08/entity_usage_settings_local_tasks.png?itok=7ktxSG5G 1x" media="all and (min-width: 500px)" type="image/png" width="300" height="347"><img src="/sites/default/files/styles/uncropped_300w_webp/public/2025-08/entity_usage_settings_local_tasks.png?itok=7ktxSG5G" alt="Configuring local tasks." title width="300" height="347" loading="lazy" data-component-id="xtra:image" class="img-fluid"></picture></div><p>Several types of tracking plugins allow you to check and see if an entity is in use as an embed in CKEditor, referenced by field, or within a layout builder relationship.&nbsp;</p><div class="align-center media media--type-image media--view-mode-small"><picture><source srcset="/sites/default/files/styles/uncropped_300w_webp/public/2025-08/entity_usage_enabled_tracking_plugins.png?itok=wW0jLqJe 1x" media="all and (min-width: 500px)" type="image/png" width="300" height="345"><img src="/sites/default/files/styles/uncropped_300w_webp/public/2025-08/entity_usage_enabled_tracking_plugins.png?itok=wW0jLqJe" alt="Configuring tracking plugins." title width="300" height="345" loading="lazy" data-component-id="xtra:image" class="img-fluid"></picture></div><p>The usage tab will show you these references even letting the editor know if the usage is in a previous revision or translation of the source entity.</p><div class="align-center media media--type-image media--view-mode-small"><picture><source srcset="/sites/default/files/styles/uncropped_300w_webp/public/2025-08/entity_usage_tab_on_content.png?itok=P9-wMoSn 1x" media="all and (min-width: 500px)" type="image/png" width="300" height="270"><img src="/sites/default/files/styles/uncropped_300w_webp/public/2025-08/entity_usage_tab_on_content.png?itok=P9-wMoSn" alt="The usage tab on content." title width="300" height="270" loading="lazy" data-component-id="xtra:image" class="img-fluid"></picture></div><p>For many clients, I've configured entity delete forms to warn an editor if the entity they are deleting is used by another source entity. This is great for ensuring unexpected broken links.</p><div class="align-center media media--type-image media--view-mode-small"><picture><source srcset="/sites/default/files/styles/uncropped_300w_webp/public/2025-08/entity_usage_warning_on_delete.png?itok=pEIq9fDD 1x" media="all and (min-width: 500px)" type="image/png" width="300" height="196"><img src="/sites/default/files/styles/uncropped_300w_webp/public/2025-08/entity_usage_warning_on_delete.png?itok=pEIq9fDD" alt="Configuring the warning on the delete form." title width="300" height="196" loading="lazy" data-component-id="xtra:image" class="img-fluid"></picture></div><p>A recent project needed to audit a number of documents (mostly PDFs) that were unexpectedly appearing in Google search results. The easiest way to identify documents that needed to be archived was to review unused media.</p><p>I took a two-prong approach to showing usage and attempting to show unused media on the site.</p><p>First, I added <a href="https://www.drupal.org/project/entity_usage_views_field">Entity Usage Views Field</a> so that I could add a simple count to views like the administrative media view. This does not require any relationships to be added to the view.</p><p>A limitation of this field is that it does not allow you to filter by the usage count.</p><p>To get around this for a special "Unused media" view, I added the media usage relationship and then used aggregation to sum the usage count and group media titles. This aggregated value could also be used as a filter by looking to see if the usage count was null.</p><div class="media media--type-image media--view-mode-large"><picture><source srcset="/sites/default/files/styles/uncropped_500w_webp/public/2025-08/unused-media-view-add-relationship.png.webp?itok=ZhKIMkwe 500w, /sites/default/files/styles/uncropped_700w_webp/public/2025-08/unused-media-view-add-relationship.png.webp?itok=SF5dMolb 700w, /sites/default/files/styles/uncropped_960w_webp/public/2025-08/unused-media-view-add-relationship.png.webp?itok=fisNN4w2 960w" media="all and (min-width: 500px)" type="image/webp" sizes="100vw" width="960" height="749"><img src="/sites/default/files/styles/uncropped_500w_webp/public/2025-08/unused-media-view-add-relationship.png.webp?itok=ZhKIMkwe" alt="Add the relationship to media usage." title width="500" height="390" loading="lazy" data-component-id="xtra:image" class="img-fluid"></picture></div><div class="media media--type-image media--view-mode-large"><picture><source srcset="/sites/default/files/styles/uncropped_500w_webp/public/2025-08/unused-media-view-use-aggregation.png.webp?itok=5W603gno 500w, /sites/default/files/styles/uncropped_700w_webp/public/2025-08/unused-media-view-use-aggregation.png.webp?itok=X2-eGN7q 700w, /sites/default/files/styles/uncropped_960w_webp/public/2025-08/unused-media-view-use-aggregation.png.webp?itok=Qfz7_f4a 960w" media="all and (min-width: 500px)" type="image/webp" sizes="100vw" width="960" height="749"><img src="/sites/default/files/styles/uncropped_500w_webp/public/2025-08/unused-media-view-use-aggregation.png.webp?itok=5W603gno" alt="Turn on aggregation." title width="500" height="390" loading="lazy" data-component-id="xtra:image" class="img-fluid"></picture></div><div class="align-center media media--type-image media--view-mode-medium"><picture><source srcset="/sites/default/files/styles/uncropped_500w_webp/public/2025-08/usage-information-field-filter.png.webp?itok=aZOz5W9c 500w, /sites/default/files/styles/uncropped_600w_webp/public/2025-08/usage-information-field-filter.png.webp?itok=d9bCGtno 600w" media="all and (min-width: 500px)" type="image/webp" sizes="100vw" width="600" height="103"><img src="/sites/default/files/styles/uncropped_500w_webp/public/2025-08/usage-information-field-filter.png.webp?itok=aZOz5W9c" alt="Add the aggregated usage information as a summed up field and filter." title width="500" height="86" loading="lazy" data-component-id="xtra:image" class="img-fluid"></picture></div><p>For media that was appropriately embedded within the site, this worked great. However, I have a saying, "editors gonna edit." It turns out that our editors had done thinks like copying the media download link and pasting an absolute URL into a link with CKEditor instead of embedding documents. Further, we discovered that some editors had access to upload files directly to Amazon's S3 file service and were linking to these PDFs directly.</p><p>To solve for these edge cases—which were relatively rare—we created an administrative view to audit our content and look in the body field using group of filters matching the various patterns we knew would need auditing.</p><p>The end result was shocking. For a site that only launched three years ago, there were over 14,000 PDF documents that had been created and just over 7,000 of those PDFs were not embedded anywhere on the site. Archiving these documents no only will free up a considerable amount of disk storage, it also helps reduce the burden of auditing those documents for accessibility as a part of the site's 2026 deadline for meeting WCAG AA compliance.</p><hr><p>Does media tracking sound like a problem you need help solving? <a href="https://www.linkedin.com/in/joshuami/">Connect with me on LinkedIn</a> and let's talk.</p></div></div></article></div></div>
  
                    </div>
                            </div>
  </div>
</main>  
      <footer  class="page__footer my-4"><div class="container"><div class="d-flex flex-wrap justify-content-md-between align-items-md-center"><div  class="block--type-content block block-block-content block-block-contenteef4fdab-fc1c-4734-aee3-9ba82dc12e38 block--content block--xtra-license" data-component-id="xtra:block"><div class="block__content"><div  data-component-id="xtra:field" class="field field--name-body field--type-text-with-summary field--label-hidden field--item mb-3"><p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p></div></div></div><div  data-component-id="xtra:block" class="block block-system block-system-powered-by-block block--xtra-poweredbydrupal"><div class="block__content"><span>Powered by <a href="https://www.drupal.org">Drupal</a></span></div></div></div></div></footer>  </div>

  </div>

    

    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","pathPrefix":"","currentPath":"node\/146","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en","themeUrl":"themes\/custom\/xtra"},"pluralDelimiter":"\u0003","suppressDeprecationErrors":true,"user":{"uid":0,"permissionsHash":"43bd5edb322b39fbaf1b731997c706a7505ce54acc8144be9aa5ab465a64853d"}}</script>
<script src="/sites/default/files/js/js_2UjWh_UfnlJAQFbbr2Xw4ZaCQnL9nE8GKYDscdTrcYU.js?scope=footer&amp;delta=0&amp;language=en&amp;theme=xtra&amp;include=eJyrKClK1C8uqcxJBQAW1gQg"></script>
<script src="/themes/custom/xtra/build/js/main.script.js?v=1.0.0" type="module"></script>

          
      </body>
</html>
