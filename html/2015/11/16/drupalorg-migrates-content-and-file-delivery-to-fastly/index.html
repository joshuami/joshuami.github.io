<!DOCTYPE html>
<html lang="en" dir="ltr" prefix="og: https://ogp.me/ns#" style="--color--primary-hue:202;--color--primary-saturation:79%;--color--primary-lightness:50">
  <head>
    <meta charset="utf-8" />
<noscript><style>form.antibot * :not(.antibot-message) { display: none !important; }</style>
</noscript><meta name="description" content="Reposted from Drupal.org We are so stoked to announce our partnership with Fastly. Fastly is now serving up all of our traffic from the *.drupal.org domain Drupal sites and related services." />
<link rel="canonical" href="https://joshuami.com/2015/11/16/drupalorg-migrates-content-and-file-delivery-to-fastly" />
<link rel="shortlink" href="https://joshuami.com/" />
<meta name="rights" content="Copyright ©2024 All rights reserved." />
<meta name="referrer" content="unsafe-url" />
<meta property="og:site_name" content="Joshuami" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://joshuami.com/2015/11/16/drupalorg-migrates-content-and-file-delivery-to-fastly" />
<meta property="og:title" content="Drupal.org Migrates Content and File Delivery to Fastly" />
<meta property="og:description" content="Reposted from Drupal.org We are so stoked to announce our partnership with Fastly. Fastly is now serving up all of our traffic from the *.drupal.org domain Drupal sites and related services." />
<meta property="og:updated_time" content="2024-12-16T15:06:46-08:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="Reposted from Drupal.org We are so stoked to announce our partnership with Fastly. Fastly is now serving up all of our traffic from the *.drupal.org domain Drupal sites and related services." />
<meta name="twitter:title" content="Drupal.org Migrates Content and File Delivery to Fastly" />
<meta name="Generator" content="Drupal 11 (https://www.drupal.org)" />
<meta name="MobileOptimized" content="width" />
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
        {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://joshuami.com/"
        },
        {
            "@type": "ListItem",
            "position": 2,
            "name": "Drupal.org Migrates Content and File Delivery to Fastly"
        }
    ]
}</script>
<link rel="icon" href="/core/misc/favicon.ico" type="image/vnd.microsoft.icon" />

    <title>Drupal.org Migrates Content and File Delivery to Fastly | Joshuami</title>
    <link rel="stylesheet" media="all" href="/sites/default/files/css/css_J0i-OKYxb_10npI0th3143G7SqxxJi9RcepfG9X65jw.css?delta=0&amp;language=en&amp;theme=drupal_cms_olivero&amp;include=eJx1yjEOAyEMBdELgTgSMmAhK4aPMLsr3z5pki7tvGn7WqS5DstQuXkjdUUhjXZcZfag5LhObmIVH_eEyRUa_uzfPOmWTkcw49oyaPuPFh7e3GLxWBT1Fczt8EiFjN9Mmjj8" />
<link rel="stylesheet" media="all" href="/sites/default/files/css/css_vn9Sr9Ubno1SjMHdwFZ3BGuwdPI4L5Q6HSxxrjjorvI.css?delta=1&amp;language=en&amp;theme=drupal_cms_olivero&amp;include=eJx1yjEOAyEMBdELgTgSMmAhK4aPMLsr3z5pki7tvGn7WqS5DstQuXkjdUUhjXZcZfag5LhObmIVH_eEyRUa_uzfPOmWTkcw49oyaPuPFh7e3GLxWBT1Fczt8EiFjN9Mmjj8" />

    
    
<link rel="preload" href="/core/themes/olivero/fonts/metropolis/Metropolis-Regular.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/core/themes/olivero/fonts/metropolis/Metropolis-SemiBold.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/core/themes/olivero/fonts/metropolis/Metropolis-Bold.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/core/themes/olivero/fonts/lora/lora-v14-latin-regular.woff2" as="font" type="font/woff2" crossorigin>
    <noscript><link rel="stylesheet" href="/core/themes/olivero/css/components/navigation/nav-primary-no-js.css?sorlvh" />
</noscript>
  </head>
  <body class="path-node page-node-type-blog">
        <a href="#main-content" class="visually-hidden focusable skip-link">
      Skip to main content
    </a>
    
      <div class="dialog-off-canvas-main-canvas" data-off-canvas-main-canvas>
    
<div id="page-wrapper" class="page-wrapper">
  <div id="page">

          <header id="header" class="site-header" data-drupal-selector="site-header" role="banner">

                <div class="site-header__fixable" data-drupal-selector="site-header-fixable">
          <div class="site-header__initial">
            <button class="sticky-header-toggle" data-drupal-selector="sticky-header-toggle" role="switch" aria-controls="site-header__inner" aria-label="Sticky header" aria-checked="false">
              <span class="sticky-header-toggle__icon">
                <span></span>
                <span></span>
                <span></span>
              </span>
            </button>
          </div>

                    <div id="site-header__inner" class="site-header__inner" data-drupal-selector="site-header-inner">
            <div class="container site-header__inner__container">

              


<div id="block-drupal-cms-olivero-site-branding" class="site-branding block block-system block-system-branding-block">
  
    
    <div class="site-branding__inner">
              <div class="site-branding__text">
        <div class="site-branding__name">
          <a href="/" title="Home" rel="home">Joshuami</a>
        </div>
      </div>
      </div>
</div>

<div class="header-nav-overlay" data-drupal-selector="header-nav-overlay"></div>


                              <div class="mobile-buttons" data-drupal-selector="mobile-buttons">
                  <button class="mobile-nav-button" data-drupal-selector="mobile-nav-button" aria-label="Main Menu" aria-controls="header-nav" aria-expanded="false">
                    <span class="mobile-nav-button__label">Menu</span>
                    <span class="mobile-nav-button__icon"></span>
                  </button>
                </div>

                <div id="header-nav" class="header-nav" data-drupal-selector="header-nav">
                  
<nav  id="block-drupal-cms-olivero-main-menu" class="primary-nav block block-menu navigation menu--main" aria-labelledby="block-drupal-cms-olivero-main-menu-menu" role="navigation">
            
  <h2 class="visually-hidden block__title" id="block-drupal-cms-olivero-main-menu-menu">Main navigation</h2>
  
        


          
        
    <ul  class="menu primary-nav__menu primary-nav__menu--level-1" data-drupal-selector="primary-nav-menu--level-1">
            
                          
        
        
        <li class="primary-nav__menu-item primary-nav__menu-item--link primary-nav__menu-item--level-1">
                              
                      <a href="/blog" class="primary-nav__menu-link primary-nav__menu-link--link primary-nav__menu-link--level-1" data-drupal-selector="primary-nav-menu-link-has-children" data-drupal-link-system-path="blog">            <span class="primary-nav__menu-link-inner primary-nav__menu-link-inner--level-1">Blog</span>
          </a>

            
                  </li>
          </ul>
  


  </nav>


                  
                </div>
                          </div>
          </div>
        </div>
      </header>
    
    <div id="main-wrapper" class="layout-main-wrapper layout-container">
      <div id="main" class="layout-main">
        <div class="main-content">
          <a id="main-content" tabindex="-1"></a>
          
          <div class="main-content__container container">
            

  <div class="region region--highlighted grid-full layout--pass--content-medium">
    <div data-drupal-messages-fallback class="hidden messages-list"></div>

  </div>

            

  <div class="region region--breadcrumb grid-full layout--pass--content-medium">
    

<div id="block-drupal-cms-olivero-breadcrumbs" class="block block-system block-system-breadcrumb-block">
  
    
      <div class="block__content">
        <nav class="breadcrumb" role="navigation" aria-labelledby="system-breadcrumb">
    <h2 id="system-breadcrumb" class="visually-hidden">Breadcrumb</h2>
    <div class="breadcrumb__content">
      <ol class="breadcrumb__list">
                  <li class="breadcrumb__item">
                          <a href="/" class="breadcrumb__link">Home</a>
                      </li>
                  <li class="breadcrumb__item">
                          Drupal.org Migrates Content and File Delivery to Fastly
                      </li>
              </ol>
    </div>
  </nav>

    </div>
  </div>

  </div>


                          <main role="main">
                

  <div class="region region--content-above grid-full layout--pass--content-medium">
    

<div id="block-drupal-cms-olivero-page-title" class="block block-core block-page-title-block">
  
  

  <h1 class="title page-title">
<span>Drupal.org Migrates Content and File Delivery to Fastly</span>
</h1>


  
</div>

  </div>

                

  <div class="region region--content grid-full layout--pass--content-medium" id="content">
    

<div id="block-drupal-cms-olivero-content" class="block block-system block-system-main-block">
  
    
      <div class="block__content">
      

<article class="node node--type-blog node--promoted node--view-mode-full">
  <header class="">
    
          
          <div class="node__meta">
              <span>
          By <span class="node__author">
<span><span>admin</span></span>
</span>, 16 November 2015
        </span>
        
      </div>
      </header>
  <div class="node__content">
          <div class="layout layout--onecol">
    <div  class="layout__region layout__region--content">
      

<div class="block block-layout-builder block-field-blocknodeblogbody">
  
    
      <div class="block__content">
      
            <div class="text-content clearfix field field--name-body field--type-text-with-summary field--label-hidden field__item"><p><em><a href="https://www.drupal.org/news/drupalorg-migrates-content-and-file-delivery-to-fastly">Reposted from Drupal.org</a></em></p>
<p><img src="https://www.drupal.org/files/fastly-logo_0.png" alt="Fastly logo" width="250">We are so stoked to announce our partnership with <a href="http://fastly.us/1H1mcCF">Fastly</a>. Fastly is now serving up all of our traffic from the *.drupal.org domain Drupal sites and related services.</p>
<h2>Drupal.org is big</h2>
<p>Drupal.org and its services handle over <em>1.5 billion</em> requests per month; this is a massive amount of traffic for an open source project.</p>
<p>Every time cron runs the update service on your Drupal site, it talks to updates.drupal.org. Every time you download a copy of Drupal or any projects on Drupal.org, you talk to ftp.drupal.org. (We see over 400,000 downloads of Drupal core in a typical month—way more around DrupalCons and major community sprints.)</p>
<p>Each month we have over 15 million unique pageviews on Drupal.org—by over 2 million unique visitors.</p>
<p>All of those stats are about to rise significantly with the launch of Drupal 8. Drupal 7 caused a 30% bump in traffic when it was released and we expect even more with the launch of Drupal 8.</p>
<h2>Fastly is… well… fast</h2>
<p>In 2014, we implemented a CDN (content delivery network) for Drupal.org. The impact was immediate. Everything was faster. We met our initial goal of getting Drupal.org sites and services fronted by a CDN.</p>
<p>That CDN solution was a good start, and while it lacked features we didn’t know we needed, it improved our ability to deliver Drupal-generated content as well as packaged projects.</p>
<p>Late in 2014, we were introduced to Fastly. They offered us an opportunity to try out the service for ftp.drupal.org and we haven’t looked back.</p>
<h3>Varnish for the win!</h3>
<p>You may already use the open source Varnish for your Drupal sites. Varnish is an HTTP accelerator. Drupal.org began using Varnish in 2009 to reduce load on its web servers. It is a powerful cache that likely sits in front of your web origins. Fastly gives us a globally distributed Varnish cache with all of the features we are familiar with.</p>
<p>Fastly hires maintainers of the Varnish project and are helping move it forward. Drupal 8 cache keys are also a straight correllation to Fastly Surrogate Key purging and Fastly’s active involvement is another great <a href="https://www.drupal.org/node/2491561">example</a> of Fastly working with an open source community (ours!) to build a better experience.</p>
<p>Yay, open source!</p>
<h3>Open Source Alliance</h3>
<p>Speaking of open source, <a href="http://fastly.us/1LewNVK">Fastly has an open source alliance</a> that provides free content delivery to projects like Debian, the MIT Media Lab, the W3C, Memcached, Linux Foundation, and more. They have even open sourced some of their technology stack to make it easier for others to build systems with their tools. We love partnering with these sorts of organizations.</p>
<h3>Supporting Technology Partner</h3>
<p>Speaking of partnering, Fastly took their partnership a step further and are helping fund a lot of great work on Drupal.org through commitments to sponsor DrupalCons and even the release of Drupal 8. Look for them at upcoming DrupalCons. Thanks Fastly!</p>
<h2>How Fastly Works</h2>
<p>Fastly’s <a href="http://fastly.us/1kv5OAw">Global Network</a> consists of Points of Presence (POPs) running Fastly’s custom Varnish software stack. These POPs are spread around the world in strategic locations close to the highest density Internet Exchange Points, ensuring cached content is just a few milliseconds away.</p>
<p><img src="https://www.drupal.org/files/fastly_global_delivery_network_pop_map_v25_11.05.15.png" alt="Global network"></p>
<p>Fastly has a powerful feature that allows us to specify a specific POP as a shield to our origin server. In our case we chose the Seattle POP because of its proximity to our servers at the &lt;a href=”<a href="http://osuosl.org">http://osuosl.org</a>”&gt;OSL&lt;/a&gt; in Corvallis, Oregon in the United States.</p>
<p><img src="https://www.drupal.org/files/caching-basics-1st-request-withshielding.png" alt="Caching basics"></p>
<p>The origin shield configuration means all requests to Drupal.org flow through Fastly’s origin server in Seattle before reaching our Drupal.org origin. If <a href="http://fastly.us/1NvHzsE">Fastly’s origin server</a> in Seattle has already cached the file, no request to our Drupal.org origin is necessary.</p>
<p><img src="https://www.drupal.org/files/caching-basics-subsequent-request-withshielding.png" alt="Caching basics, subsequent requests"></p>
<p>In practice, this allows us to deliver a huge amount of content with an extremely high hit ratio. (See that spike in the GIF below, that’s one of those regular times that cron jobs request a ton of content from our updates server. Fastly is just churning along.)</p>
<p><img src="https://www.drupal.org/files/fastly-updates-performance.gif" alt="Really cool animated GIF showing updates traffic"></p>
<p>(Fastly made us confident we could put this enormous GIF in our write up.)</p>
<h3>Faster changes, faster response time</h3>
<p>Another advantage to Fastly has been the efficiencies it has given us by allowing us to quickly make changes to how they cache our content. With our previous CDN, changes could take up to 4 hours to propagate through the system. We can now change a Varnish config and reflect those changes in under 5 seconds. That has been a huge help when we need to make a hot fix to production and keep Drupal.org delivering Drupal to the world.</p>
<h3>Logging and improving our usage stats</h3>
<p>Fastly also allows us to <a href="http://fastly.us/1lnEQed">stream our logs</a>. This means we can parse those logs and turn them into data. We are already seeing much more reliable project usage statistics with from our new log processing for updates.drupal.org thanks to Fastly’s log streaming.</p>
<p>More accurate logs mean we can provide users with better data to help them to make better decisions about modules, themes and distributions that have the most installations.</p>
<h2>Next Steps with Fastly</h2>
<p>We have been impressed with Fastly, both for their responsiveness and the performance improvements we have seen while using their services. They have given a ton to our community and we can’t wait to see where they take Varnish and their open-source-powered service. If you are interested in using Fastly with your own Drupal sites, you can <a href="https://www.drupal.org/marketplace/fastly">learn more about Fastly</a> on their Drupal.org organization page or sign up for a <a href="http://fastly.us/1iZPKoy">developer account at Fastly.com</a>—there is even a <a href="https://www.drupal.org/project/fastly">Fastly module</a> for Drupal7, and one for Drupal8 is on the way!</p>
</div>
      
    </div>
  </div>

    </div>
  </div>

  </div>
  </article>

    </div>
  </div>

  </div>

              </main>
                        
          </div>
        </div>
        <div class="social-bar">
          
        </div>
      </div>
    </div>

    <footer class="site-footer">
      <div class="site-footer__inner container">
        

  <div class="region region--footer-top grid-full layout--pass--content-medium">
    <div class="region--footer_top__inner">
      

<div id="block-drupal-cms-olivero-license" class="block block-block-content block-block-contenteef4fdab-fc1c-4734-aee3-9ba82dc12e38">
  
    
      <div class="block__content">
      
            <div class="text-content clearfix field field--name-body field--type-text-with-summary field--label-hidden field__item"><p>This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>
</div>
      
    </div>
  </div>

    </div>
  </div>

        

  <div class="region region--footer-bottom grid-full layout--pass--content-medium">
    

<div id="block-drupal-cms-olivero-powered" class="block block-system block-system-powered-by-block">
  
    
    
  <span>
    Powered by    <a href="https://www.drupal.org">Drupal</a>
    <span class="drupal-logo" role="img" aria-label="Drupal Logo">
      <svg width="14" height="19" viewBox="0 0 42.15 55.08" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M29.75 11.73C25.87 7.86 22.18 4.16 21.08 0 20 4.16 16.28 7.86 12.4 11.73 6.59 17.54 0 24.12 0 34a21.08 21.08 0 1042.15 0c0-9.88-6.59-16.46-12.4-22.27zM10.84 35.92a14.13 14.13 0 00-1.65 2.62.54.54 0 01-.36.3h-.18c-.47 0-1-.92-1-.92-.14-.22-.27-.45-.4-.69l-.09-.19C5.94 34.25 7 30.28 7 30.28a17.42 17.42 0 012.52-5.41 31.53 31.53 0 012.28-3l1 1 4.72 4.82a.54.54 0 010 .72l-4.93 5.47zm10.48 13.81a7.29 7.29 0 01-5.4-12.14c1.54-1.83 3.42-3.63 5.46-6 2.42 2.58 4 4.35 5.55 6.29a3.08 3.08 0 01.32.48 7.15 7.15 0 011.3 4.12 7.23 7.23 0 01-7.23 7.25zM35 38.14a.84.84 0 01-.67.58h-.14a1.22 1.22 0 01-.68-.55 37.77 37.77 0 00-4.28-5.31l-1.93-2-6.41-6.65a54 54 0 01-3.84-3.94 1.3 1.3 0 00-.1-.15 3.84 3.84 0 01-.51-1v-.19a3.4 3.4 0 011-3c1.24-1.24 2.49-2.49 3.67-3.79 1.3 1.44 2.69 2.82 4.06 4.19a57.6 57.6 0 017.55 8.58A16 16 0 0135.65 34a14.55 14.55 0 01-.65 4.14z"/>
</svg>
    </span>
  </span>
</div>

  </div>

      </div>
    </footer>

    <div class="overlay" data-drupal-selector="overlay"></div>

  </div>
</div>

  </div>

    
    <script type="application/json" data-drupal-selector="drupal-settings-json">{"path":{"baseUrl":"\/","pathPrefix":"","currentPath":"node\/99","currentPathIsAdmin":false,"isFront":false,"currentLanguage":"en"},"pluralDelimiter":"\u0003","suppressDeprecationErrors":true,"user":{"uid":0,"permissionsHash":"faa4909ecaed40b8316001fb48511d58dab4d0bca5357ce0828f416e1d7b7d8c"}}</script>
<script src="/sites/default/files/js/js_qsZqP5sPL2qmQq_zFArAY5kzkfq9cpZxWCx-f7QUJyw.js?scope=footer&amp;delta=0&amp;language=en&amp;theme=drupal_cms_olivero&amp;include=eJzLz8ksSy3K10_PyU9KzNEtLqnMycxL18mHCucllmWmJ5Zk5ufpFhRl5iYWVQIA53wTlA"></script>

  </body>
</html>
