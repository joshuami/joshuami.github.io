/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
let ed11yOnce;let ed11yInitialized;let ed11yWaiting=false;const ed11yInitializer=function(){if(ed11yInitialized==='disabled'||ed11yInitialized==='pending')return;ed11yInitialized='pending';let options={};options.checkRoots=drupalSettings.editoria11y.content_root?drupalSettings.editoria11y.content_root:false;options.ignoreElements=!!drupalSettings.editoria11y.ignore_elements?`#toolbar-administration *, ${drupalSettings.editoria11y.ignore_elements}`:'#toolbar-administration *';options.panelNoCover=!!drupalSettings.editoria11y.panel_no_cover?drupalSettings.editoria11y.panel_no_cover:'#klaro-cookie-notice, #klaro_toggle_dialog, .same-page-preview-dialog.ui-dialog-position-side, #gin_sidebar';options.ignoreAllIfAbsent=!!drupalSettings.editoria11y.ignore_all_if_absent?drupalSettings.editoria11y.ignore_all_if_absent:false;const editors=(Drupal.editors&&(Object.hasOwn(Drupal.editors,'ckeditor5')||Object.hasOwn(Drupal.editors,'gutenberg')));let delay=drupalSettings.path.currentPathIsAdmin?250:0;if(document.URL.indexOf('mode=same_page_preview')>-1){ed11yOnce=true;ed11yInitialized='disabled';return;}else{if(drupalSettings.path.currentPathIsAdmin&&(!!drupalSettings.editoria11y.disable_live||!editors)){ed11yInitialized=false;return;}}if(document.querySelector('.layout-builder-form')){ed11yOnce=true;ed11yInitialized='disabled';return;}else{if(editors){if(drupalSettings.path.currentPathIsAdmin&&!!drupalSettings.editoria11y.disable_live){ed11yOnce=true;ed11yInitialized='disabled';return;}options.inlineAlerts=false;if(Object.hasOwn(Drupal.editors,'gutenberg')){options.ignoreAriaOnElements='h1,h2,h3,h4,h5,h6';delay=1000;window.setTimeout(function(){if(Ed11y.results.length===0)Ed11y.checkAll();},6000);}options.checkRoots='.gutenberg__editor .is-root-container, [contenteditable="true"]:not(.gutenberg__editor [contenteditable], [contenteditable="true"] [contenteditable])';options.ignoreElements+=', [hidden], [style*="display: none"], [style*="display:none"], [hidden] *, [style*="display: none"] *, [style*="display:none"] *, [data-drupal-message-type]';options.ignoreAllIfAbsent=options.ignoreAllIfAbsent?options.ignoreAllIfAbsent+', [contenteditable="true"], .gutenberg__editor .is-root-container':'[contenteditable="true"], .gutenberg__editor .is-root-container';options.editorHeadingLevel=[];if(drupalSettings.editoria11y.live_h2)options.editorHeadingLevel.push({selector:drupalSettings.editoria11y.live_h2,previousHeading:1});if(drupalSettings.editoria11y.live_h3)options.editorHeadingLevel.push({selector:drupalSettings.editoria11y.live_h3,previousHeading:2});if(drupalSettings.editoria11y.live_h4)options.editorHeadingLevel.push({selector:drupalSettings.editoria11y.live_h4,previousHeading:3});if(drupalSettings.editoria11y.live_h_inherit)options.editorHeadingLevel.push({selector:drupalSettings.editoria11y.live_h_inherit,previousHeading:'inherit'});options.editorHeadingLevel.push({selector:'*',previousHeading:0});}}ed11yOnce=true;let urlParams=new URLSearchParams(window.location.search);let lang=drupalSettings.editoria11y.lang?drupalSettings.editoria11y.lang:'en';if(lang!=='en'){lang='dynamic';ed11yLang.dynamic=ed11yLangDrupal;options.langSanitizes=true;}let ed11yAlertMode=drupalSettings.editoria11y.assertiveness?drupalSettings.editoria11y.assertiveness:'assertive';const now=new Date();if(drupalSettings.path.currentPathIsAdmin&&(Drupal.editors&&(Object.hasOwn(Drupal.editors,'ckeditor5')||Object.hasOwn(Drupal.editors,'gutenberg')))&&drupalSettings.editoria11y.assertiveness!=='polite')ed11yAlertMode='active';else{if(urlParams.has('ed1ref')||(ed11yAlertMode==='smart'&&((now/1000)-drupalSettings.editoria11y.changed<60)))ed11yAlertMode='assertive';}options.lang=lang;options.ignoreByKey={'p':'table:not(.field-multiple-table) p','h':'.filter-guidelines-item *, nav *, [id$="-local-tasks"] *, .tabledrag h4','img':'[aria-hidden], [aria-hidden] img','a':`[aria-hidden][tabindex], [id$="-local-tasks"] a, .filter-help > a, .contextual-region > nav a ${drupalSettings.path.currentPathIsAdmin?', a[target="_blank"]':''}`,'table':'[role="presentation"], .tabledrag'};options.alertMode=ed11yAlertMode;options.currentPage=drupalSettings.editoria11y.page_path;options.allowHide=!!drupalSettings.editoria11y.allow_hide;options.allowOK=!!drupalSettings.editoria11y.allow_ok;options.syncedDismissals=drupalSettings.editoria11y.dismissals;options.showDismissed=urlParams.has('ed1ref');options.preventCheckingIfPresent=!!drupalSettings.editoria11y.no_load?drupalSettings.editoria11y.no_load+'.layout-builder-form':'.layout-builder-form';options.linkStringsNewWindows=!!drupalSettings.editoria11y.link_strings_new_windows?new RegExp(drupalSettings.editoria11y.link_strings_new_windows,'g'):!!drupalSettings.editoria11y.ignore_link_strings?new RegExp(drupalSettings.editoria11y.ignore_link_strings,'g'):new RegExp('('+Drupal.t('download')+')|(\\s'+Drupal.t('tab')+')|('+Drupal.t('window')+')','g');options.linkIgnoreStrings=!!drupalSettings.editoria11y.ignore_link_strings?new RegExp(drupalSettings.editoria11y.ignore_link_strings,'g'):new RegExp('('+Drupal.t('link is external')+')|('+Drupal.t('link sends email')+')','g');options.linkIgnoreSelector=!!drupalSettings.editoria11y.link_ignore_selector?drupalSettings.editoria11y.link_ignore_selector:false;options.hiddenHandlers=!!drupalSettings.editoria11y.hidden_handlers?drupalSettings.editoria11y.hidden_handlers:'';options.theme=!!drupalSettings.editoria11y.theme?drupalSettings.editoria11y.theme:'sleekTheme';options.embeddedContent=!!drupalSettings.editoria11y.embedded_content_warning?drupalSettings.editoria11y.embedded_content_warning:false;options.documentLinks=!!drupalSettings.editoria11y.download_links?drupalSettings.editoria11y.download_links:`a[href$='.pdf'], a[href*='.pdf?']`;options.customTests=drupalSettings.editoria11y.custom_tests;options.cssUrls=!!drupalSettings.editoria11y.css_url?[drupalSettings.editoria11y.css_url+'/library/css/editoria11y.css']:false;options.buttonZIndex=99999;if(!!drupalSettings.editoria11y.view_reports)options.reportsURL=drupalSettings.editoria11y.dashboard_url;if(typeof editoria11yOptionsOverride!=='undefined'&&typeof editoria11yOptions==='function')options=editoria11yOptions(options);ed11yWaiting=true;window.setTimeout(function(){ed11yInitialized=true;const ed11y=new Ed11y(options);ed11yWaiting=false;window.addEventListener('keyup',(e)=>{if(!e.target.closest('.ed11y-wrapper, [contenteditable="true"]')&&Ed11y.bodyStyle){Ed11y.incrementalAlign();Ed11y.alignPending=false;}});window.addEventListener('click',(e)=>{if(!e.target.closest('.ed11y-wrapper, [contenteditable="true"]')&&Ed11y.bodyStyle){Ed11y.incrementalAlign();Ed11y.alignPending=false;Ed11y.incrementalCheck();}});},delay);let csrfToken=false;function getCsrfToken(action,data){fetch(`${drupalSettings.editoria11y.session_url}`,{method:"GET"}).then((res)=>res.text()).then((token)=>{csrfToken=token;postData(action,data).catch((err)=>console.error(err));}).catch((err)=>console.error(err));;}let postData=async function(action,data){if(!csrfToken)getCsrfToken(action,data);else{let apiRoot=drupalSettings.editoria11y.api_url.replace('results/report','');let url=`${apiRoot}${action}`;fetch(url,{method:'POST',headers:{'Content-Type':'application/json','X-CSRF-Token':csrfToken},body:JSON.stringify(data)}).catch((error)=>console.error('Error:',error));}};if(urlParams.has('ed1ref')&&urlParams.get('ed1ref')!==drupalSettings.editoria11y.page_path){let data={page_path:urlParams.get('ed1ref')};window.setTimeout(function(){postData('purge/page',data);},0,data);}let results={};let oks={};let total=0;let extractResults=function(){results={};oks={};total=0;Ed11y.results.forEach((result)=>{if(result.dismissalStatus!=="ok"){let testName=result.test;testName=Ed11y.M[testName].title;if(results[testName]){results[testName]=parseInt(results[testName])+1;total++;}else{results[testName]=1;total++;}}if(result.dismissalStatus==="ok")if(!results[result.test])oks[result.test]=Ed11y.M[result.test].title;});};let sendResults=function(){window.setTimeout(function(){total=0;extractResults();let url=window.location.pathname+window.location.search;url=url.length>1000?url.substring(0,1000):url;let data={page_title:drupalSettings.editoria11y.page_title,page_path:drupalSettings.editoria11y.page_path,entity_id:drupalSettings.editoria11y.entity_id,page_count:total,language:drupalSettings.editoria11y.lang,entity_type:drupalSettings.editoria11y.entity_type,route_name:drupalSettings.editoria11y.route_name,results,oks,page_url:url};postData('results/report',data);},100);};let firstRun=true;if(drupalSettings.editoria11y.dismissals&&drupalSettings.editoria11y.sync!=='dismissals'&&drupalSettings.editoria11y.sync!=='disable')document.addEventListener('ed11yResults',function(){if(firstRun){sendResults();firstRun=false;}});let sendDismissal=function(detail){if(!!detail){let data={};if(detail.dismissAction==='reset'){data={page_path:drupalSettings.editoria11y.page_path,language:drupalSettings.editoria11y.lang,route_name:drupalSettings.editoria11y.route_name,dismissal_status:'reset'};if(drupalSettings.editoria11y.sync!=='dismissals')window.setTimeout(function(){sendResults();},100);}else{data={page_title:drupalSettings.editoria11y.page_title,page_path:drupalSettings.editoria11y.page_path,entity_id:drupalSettings.editoria11y.entity_id,language:drupalSettings.editoria11y.lang,entity_type:drupalSettings.editoria11y.entity_type,route_name:drupalSettings.editoria11y.route_name,result_name:Ed11y.M[detail.dismissTest].title,result_key:detail.dismissTest,element_id:detail.dismissKey,dismissal_status:detail.dismissAction};if(detail.dismissAction==='ok'&&drupalSettings.editoria11y.sync!=='dismissals')window.setTimeout(function(){sendResults();},100);}postData('dismiss/'+detail.dismissAction,data);}};if(drupalSettings.editoria11y.dismissals&&drupalSettings.editoria11y.sync!=='disable')document.addEventListener('ed11yDismissalUpdate',function(e){sendDismissal(e.detail);},false);};Drupal.behaviors.editoria11y={attach:function(context,settings){if(ed11yInitialized===true&&ed11yOnce)window.setTimeout(function(){Ed11y.forceFullCheck=true;if(drupalSettings.editor||typeof (DrupalGutenberg)==='object')Ed11y.options.inlineAlerts=false;if(Ed11y.bodyStyle)Ed11y.incrementalCheck();else Ed11y.checkAll();},1000);else{if(ed11yOnce&&(!ed11yInitialized||ed11yInitialized!=='pending')&&!drupalSettings.editoria11y.disable_live&&Drupal.editors&&(Object.hasOwn(Drupal.editors,'ckeditor5')||Object.hasOwn(Drupal.editors,'gutenberg')))window.setTimeout(function(){if(ed11yInitialized!==true)ed11yInitializer();},1000);}if(context===document&&!ed11yOnce&&CSS.supports('selector(:is(body))')){ed11yOnce=true;window.setTimeout(()=>{ed11yInitializer();},100);}}};;
((Drupal,drupalSettings,once)=>{Drupal.behaviors.ginEscapeAdmin={attach:(context)=>{once("ginEscapeAdmin","[data-gin-toolbar-escape-admin]",context).forEach(((el)=>{const escapeAdminPath=sessionStorage.getItem("escapeAdminPath");drupalSettings.path.currentPathIsAdmin&&null!==escapeAdminPath&&el.setAttribute("href",escapeAdminPath);}));}};})(Drupal,drupalSettings,once);;
((Drupal,once)=>{Drupal.behaviors.ginCoreNavigation={attach:(context)=>{Drupal.ginCoreNavigation.initKeyboardShortcut(context);}},Drupal.ginCoreNavigation={initKeyboardShortcut:function(context){once("ginToolbarKeyboardShortcut",".admin-toolbar__expand-button",context).forEach((()=>{document.addEventListener("keydown",((e)=>{!0===e.altKey&&"KeyT"===e.code&&this.toggleToolbar();}));})),once("ginToolbarClickHandler",".top-bar__burger, .admin-toolbar__expand-button",context).forEach(((button)=>{button.addEventListener("click",(()=>{window.innerWidth<1280&&button.getAttribute("aria-expanded","false")&&Drupal.ginSidebar?.collapseSidebar();}));}));},toggleToolbar(){let toolbarTrigger=document.querySelector(".admin-toolbar__expand-button");toolbarTrigger&&toolbarTrigger.click();},collapseToolbar:function(){document.querySelectorAll(".top-bar__burger, .admin-toolbar__expand-button").forEach(((button)=>{button.setAttribute("aria-expanded","false");})),document.documentElement.setAttribute("data-admin-toolbar","collapsed"),Drupal.displace(!0);}};})(Drupal,once);;
((Drupal,drupalSettings,once)=>{Drupal.behaviors.ginAccent={attach:function(context){once("ginAccent","body",context).forEach((()=>{Drupal.ginAccent.checkDarkmode(),Drupal.ginAccent.setAccentColor(),Drupal.ginAccent.setFocusColor();}));}},Drupal.ginAccent={setAccentColor:function(){let preset=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,color=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const accentColorPreset=null!=preset?preset:drupalSettings.gin.preset_accent_color;document.body.setAttribute("data-gin-accent",accentColorPreset),"custom"===accentColorPreset&&this.setCustomAccentColor(color);},setCustomAccentColor:function(){let color=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,element=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;const accentColor=null!=color?color:drupalSettings.gin.accent_color;if(accentColor){this.clearAccentColor(element);const strippedAccentColor=accentColor.replace("#",""),darkAccentColor=this.mixColor("ffffff",strippedAccentColor,65).replace("#",""),style=document.createElement("style");style.className="gin-custom-colors",style.innerHTML=`\n          [data-gin-accent="custom"] {\n            --gin-color-primary-rgb: ${this.hexToRgb(accentColor)};\n            --gin-color-primary-hover: ${this.shadeColor(accentColor,-10)};\n            --gin-color-primary-active: ${this.shadeColor(accentColor,-15)};\n            --gin-bg-app-rgb: ${this.hexToRgb(this.mixColor("ffffff",strippedAccentColor,97))};\n            --gin-bg-header: ${this.mixColor("ffffff",strippedAccentColor,85)};\n            --gin-color-sticky-rgb: ${this.hexToRgb(this.mixColor("ffffff",strippedAccentColor,92))};\n          }\n          .gin--dark-mode[data-gin-accent="custom"],\n          .gin--dark-mode [data-gin-accent="custom"] {\n            --gin-color-primary-rgb: ${this.hexToRgb(darkAccentColor)};\n            --gin-color-primary-hover: ${this.mixColor("ffffff",strippedAccentColor,55)};\n            --gin-color-primary-active: ${this.mixColor("ffffff",strippedAccentColor,50)};\n            --gin-bg-header: ${this.mixColor("2A2A2D",darkAccentColor,88)};\n          }\n        `,element.append(style);}},clearAccentColor:function(){let element=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;if(element.querySelectorAll(".gin-custom-colors").length>0){const removeElement=element.querySelector(".gin-custom-colors");removeElement.parentNode.removeChild(removeElement);}},setFocusColor:function(){let preset=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,color=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const focusColorPreset=null!=preset?preset:drupalSettings.gin.preset_focus_color;document.body.setAttribute("data-gin-focus",focusColorPreset),"custom"===focusColorPreset&&this.setCustomFocusColor(color);},setCustomFocusColor:function(){let color=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,element=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;const accentColor=null!=color?color:drupalSettings.gin.focus_color;if(accentColor){this.clearFocusColor(element);const strippedAccentColor=accentColor.replace("#",""),darkAccentColor=this.mixColor("ffffff",strippedAccentColor,65),style=document.createElement("style");style.className="gin-custom-focus",style.innerHTML=`\n          [data-gin-focus="custom"] {\n            --gin-color-focus: ${accentColor};\n          }\n          .gin--dark-mode[data-gin-focus="custom"],\n          .gin--dark-mode [data-gin-focus="custom"] {\n            --gin-color-focus: ${darkAccentColor};\n          }`,element.append(style);}},clearFocusColor:function(){let element=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;if(element.querySelectorAll(".gin-custom-focus").length>0){const removeElement=element.querySelector(".gin-custom-focus");removeElement.parentNode.removeChild(removeElement);}},checkDarkmode:()=>{const darkmodeClass=drupalSettings.gin.darkmode_class;window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",((e)=>{e.matches&&"auto"===window.ginDarkmode&&document.querySelector("html").classList.add(darkmodeClass);})),window.matchMedia("(prefers-color-scheme: light)").addEventListener("change",((e)=>{e.matches&&"auto"===window.ginDarkmode&&document.querySelector("html").classList.remove(darkmodeClass);}));},hexToRgb:(hex)=>{hex=hex.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(m,r,g,b){return r+r+g+g+b+b;}));var result=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);return result?`${parseInt(result[1],16)}, ${parseInt(result[2],16)}, ${parseInt(result[3],16)}`:null;},mixColor:(color_1,color_2,weight)=>{function h2d(h){return parseInt(h,16);}weight=void 0!==weight?weight:50;for(var color="#",i=0;i<=5;i+=2){for(var v1=h2d(color_1.substr(i,2)),v2=h2d(color_2.substr(i,2)),val=Math.floor(v2+weight/100*(v1-v2)).toString(16);val.length<2;)val="0"+val;color+=val;}return color;},shadeColor:(color,percent)=>{const num=parseInt(color.replace("#",""),16),amt=Math.round(2.55*percent),R=(num>>16)+amt,B=(num>>8&255)+amt,G=(255&num)+amt;return `#${(16777216+65536*(R<255?R<1?0:R:255)+256*(B<255?B<1?0:B:255)+(G<255?G<1?0:G:255)).toString(16).slice(1)}`;}};})(Drupal,drupalSettings,once);;
