/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function($,Drupal,once){Drupal.behaviors.betterExposedFiltersAutoSubmit={attach:function(context,settings){const selectors='form[data-bef-auto-submit-full-form], [data-bef-auto-submit-full-form] form, [data-bef-auto-submit]';$(selectors,context).addBack(selectors).find('input:text:not(.hasDatepicker), textarea').each(function(){const $el=$(this);const $valueLength=$el.val().length*2;$el[0].setSelectionRange($valueLength,$valueLength);setFocus($el,$valueLength);});function setFocus($el){const observer=new IntersectionObserver((entries)=>{entries.forEach((entry)=>{if(entry.isIntersecting){const $lastTriggeredSelector=$(settings.bef_autosubmit_target).attr('data-drupal-selector');if($el.attr('data-drupal-selector')===$lastTriggeredSelector)$el.focus();}});});observer.observe($el.get(0));}$(selectors,context).addBack(selectors).each(function(i,e){const $e=$(e);let $needsAutoSubmit=$e;let autoSubmitDelay=500;if(e.hasAttribute('data-bef-auto-submit-delay'))autoSubmitDelay=$e.data('bef-auto-submit-delay');else{if(!e.hasAttribute('data-bef-auto-submit-full-form')){const $container=$e.closest('[data-bef-auto-submit-full-form]');if($container.length&&$container.get(0).hasAttribute('data-bef-auto-submit-delay')){$needsAutoSubmit=$container;autoSubmitDelay=$container.data('bef-auto-submit-delay');}}}autoSubmitDelay=autoSubmitDelay||500;let dateInputChangeDebounce=Drupal.debounce(triggerSubmit,autoSubmitDelay,false);$(once('bef-auto-submit',$needsAutoSubmit)).on('change',function(e){return e.target.type==='date'?dateInputChangeDebounce(e):triggerSubmit(e);}).on('keyup',Drupal.debounce(triggerSubmit,autoSubmitDelay,false));});function triggerSubmit(e){const ignoredKeyCodes=[16,17,18,20,33,34,35,36,37,38,39,40,9,13,27];const $target=$(e.target);const $submit=$target.closest('form').find('[data-bef-auto-submit-click]');if($target.is('[data-bef-auto-submit-exclude], :submit, .select2-search__field, .chosen-search-input'))return true;let textfieldMinimumLength=$target.closest('form').data('bef-auto-submit-minimum-length')||1;let inputTextLength=$target.val().length;let textfieldHasMinimumLength=($target.is(':text:not(.hasDatepicker), textarea')&&inputTextLength>=textfieldMinimumLength)||$target.is('[type="checkbox"], [type="radio"]');if((textfieldHasMinimumLength||inputTextLength===0)&&$.inArray(e.keyCode,ignoredKeyCodes)===-1&&!e.altKey&&!e.ctrlKey&&!e.shiftKey)$submit.click();else{if(e.type==='change'){let target=$target.is(':text:not(.hasDatepicker), textarea');if(target&&textfieldHasMinimumLength)$submit.click();else{if(!target)$submit.click();}}}settings.bef_autosubmit_target=$target;}}};}(jQuery,Drupal,once));;
(function($,Drupal){Drupal.behaviors.betterExposedFilters={attach:function(context){$('.bef-tree input[type=checkbox], .bef-checkboxes input[type=checkbox]').change(function(){_bef_highlight(this,context);}).filter(':checked').closest('.form-item',context).addClass('highlight');}};function _bef_highlight(elem,context){$elem=$(elem,context);$elem.attr('checked')?$elem.closest('.form-item',context).addClass('highlight'):$elem.closest('.form-item',context).removeClass('highlight');}})(jQuery,Drupal);;
(function($,once){Drupal.behaviors.betterExposedFiltersSelectAllNone={attach:function(){const selected=$('.form-checkboxes.bef-select-all-none:not(.bef-processed)');if(selected.length){const selAll=Drupal.t('Select All');const selNone=Drupal.t('Select None');const link=$('<a class="bef-toggle bef-toggle--select-all" href="#">'+selAll+'</a>');link.click(function(event){event.preventDefault();event.stopPropagation();if(selAll===$(this).text())$(this).html(selNone).removeClass('bef-toggle--select-all').addClass('bef-toggle--deselect-all').siblings('.bef-select-all-none, .bef-tree').find('input:checkbox').each(function(){$(this).prop('checked',true);}).end().find('input[type=checkbox]:first').change();else $(this).html(selAll).removeClass('bef-toggle--deselect-all').addClass('bef-toggle--select-all').siblings('.bef-select-all-none, .bef-tree').find('input:checkbox').each(function(){$(this).prop('checked',false);}).end().find('input[type=checkbox]:first').change();});selected.addClass('bef-processed').each(function(){const newLink=link.clone(true);newLink.insertBefore($(this));$('input:checkbox',this).click(function(){if($(this).prop("checked")===true)newLink.text(selNone);else{if($(this).prop("checked")===false)newLink.text(selAll);}});if($('input:checkbox:checked',this).length===$('input:checkbox',this).length)newLink.text(selNone).removeClass('bef-toggle--select-all').addClass('bef-toggle--deselect-all');});}}};Drupal.behaviors.betterExposedFiltersAllNoneNested={attach:function(){$(once('bef-all-none-nested','.bef-select-all-none-nested ul li')).each(function(){const $this=$(this);$this.find('input:checkbox:first').change(function(){$(this).closest('li').find('ul li input:checkbox').prop('checked',this.checked);});$this.find('ul input:checkbox').change(function(){const $this=$(this);const uncheckedSiblings=$this.closest('li').siblings('li').find('> div input:checkbox:not(:checked)').length;if(uncheckedSiblings||!this.checked)$this.parents('ul').siblings('div').find('input:checkbox').prop('checked',false);if(this.checked&&!uncheckedSiblings)$(this).closest('ul').closest('li').find('input:checkbox:first').prop('checked',true).change();});});}};})(jQuery,once);;
